<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>AUTh-ARL Core Stack: Using ATI Mini40 F/T Sensor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AUTh-ARL Core Stack
   &#160;<span id="projectnumber">0.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ati.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Using ATI Mini40 F/T Sensor </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="usage"></a>
Basic Usage</h1>
<p>In order to use the F/T sensor you need to find this package in your <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line">find_package(catkin REQUIRED COMPONENTS</div>
<div class="line">  autharl_ati_sensor</div>
<div class="line">)</div>
</div><!-- fragment --><p>Then your main should look like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;autharl_ati_sensor/autharl_ati_sensor.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Initialize the ROS node</span></div>
<div class="line">  ros::init(argc, argv, <span class="stringliteral">&quot;node_name&quot;</span>);</div>
<div class="line">  ros::NodeHandle n;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Create the robot after you have launch the URDF on the parameter server</span></div>
<div class="line">  <span class="keyword">auto</span> model = std::make_shared&lt;lwr::robot::Model&gt;(<span class="stringliteral">&quot;/robot_description&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Create the LWR robot</span></div>
<div class="line">  <span class="keyword">auto</span> robot = std::make_shared&lt;lwr::robot::Robot&gt;(model);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Create the sensor</span></div>
<div class="line">  <span class="keyword">auto</span> sensor = std::make_shared&lt;ati::sensor::Sensor&gt;();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Create a visualizer for see the result in rviz</span></div>
<div class="line">  <span class="keyword">auto</span> rviz = std::make_shared&lt;arl::viz::RosStatePublisher&gt;(robot, sensor);</div>
<div class="line"></div>
<div class="line">  std::thread rviz_thread(&amp;<a class="code" href="classarl_1_1robot_1_1_controller.html#aff59b3f48de46a2f99cca4baa4249902">arl::viz::RosStatePublisher::run</a>, rviz);</div>
<div class="line"></div>
<div class="line">  rviz_thread.join();</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>By using the RosStatePublisher thread you will be able to see the wrench measured by the F/T sensor in visualized in RViz. In Rviz add a WrenchStamped panel and use the <code>/ati_sensor</code> topic. Also if you want to see KUKA LWR and the ATI sensor in the visualization launch one of the URDFs which include the ati sensor. For example, before run the above code launch this file: </p>
<pre class="fragment">roslaunch autharl_description display.launch config:=lwr_ati
</pre><p>You can use the <code>sensor-&gt;getData()</code> function for reading measurements from the sensor.</p>
<h1><a class="anchor" id="compensation"></a>
Tool Mass Compensation</h1>
<p>Right now you can compensated values only for the force measurements, not the torque measurements.</p>
<p>Follow the following steps in order to use the tool compensation:</p>
<ul>
<li>Plug in the ATI Sensor without the tool mounted.</li>
<li>Compensate the bias of the sensor by its interface at: 192.168.2.1.</li>
<li>Mount your tool.</li>
<li>Use constructor <a class="el" href="classati_1_1sensor_1_1_sensor.html">ati::sensor::Sensor</a>(double m, const std::string&amp; name = "Ati Sensor", const std::string&amp; frame_id = "ati_sensor") to initialize the Sensor by providing the tool mass.</li>
<li>Use the <a class="el" href="namespace_eigen.html#a09219f5e0b822edbf24b125e0e2a4fe0" title="Type for 6D vectors, useful for wrenches/twists. ">Eigen::Vector6d</a> getData(const Eigen::Matrix3d&amp; rotation) function for reading data.</li>
</ul>
<h1><a class="anchor" id="Examples"></a>
Examples</h1>
<p>Examples exist in <code>core/examples</code> directory.</p>
<h1><a class="anchor" id="Safety"></a>
Notes</h1>
<p>Please for the safety of the hardware do the following:</p>
<ul>
<li>Be carefull of the cable of the sensor along the robot. During the motion of the robot the cable should not be stressed.</li>
<li>Unplug the sensor when you finish your experiments. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="tutorials.html">Tutorials</a></li>
    <li class="footer">Generated on Fri Mar 23 2018 22:16:11 for AUTh-ARL Core Stack by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
